<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ profile.user.username }} - CodeCV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'github-dark': '#0d1117',
                        'github-light': '#ffffff',
                        'primary': '#238636',
                    }
                }
            }
        }
    </script>
    <style>
        .github-dark { background-color: #0d1117; color: #c9d1d9; }
        .github-light { background-color: #ffffff; color: #24292f; }
        .dracula { background-color: #282a36; color: #f8f8f2; }
        .nord { background-color: #2e3440; color: #d8dee9; }

        /* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –¥–ª—è skill-bar */
        .skill-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="{{ profile.theme }} min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-bold">üöÄ CodeCV</h1>
            <div>
                {% if is_owner %}
                <a href="/edit/" class="px-4 py-2 bg-primary text-white rounded-lg mr-2">
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
                {% endif %}
                <a href="/admin/" class="px-4 py-2 border rounded-lg">
                    –ê–¥–º–∏–Ω–∫–∞
                </a>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="max-w-4xl mx-auto">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold mb-2">
                    {{ profile.user.get_full_name|default:profile.user.username }}
                </h2>
                <p class="text-xl text-gray-400 mb-4">{{ profile.headline|default:"–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫" }}</p>
                <p class="text-gray-500">{{ profile.bio|default:"..." }}</p>
            </div>

            <!-- GitHub –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            {% if profile.github_username %}
            <div class="mb-8 p-6 bg-gray-800 rounded-xl">
                <h3 class="text-xl font-bold mb-4">GitHub</h3>
                <p>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ profile.github_username }}</p>

                {% if profile.github_data and profile.github_data.repos %}
                    <div class="mt-4">
                        <h4 class="font-bold mb-2">–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {% for repo in profile.github_data.repos|slice:":4" %}
                            <div class="p-4 bg-gray-900 rounded-lg">
                                <h5 class="font-bold">{{ repo.name }}</h5>
                                <p class="text-sm text-gray-400">
                                    {% if repo.description %}
                                        {{ repo.description|truncatechars:100 }}
                                    {% else %}
                                        –ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è
                                    {% endif %}
                                </p>
                                {% if repo.language %}
                                <span class="inline-block px-2 py-1 mt-2 text-xs bg-gray-700 rounded">
                                    {{ repo.language }}
                                </span>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- –ù–∞–≤—ã–∫–∏ -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold mb-6">–ù–∞–≤—ã–∫–∏</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for skill in skills %}
                    <div class="p-4 border rounded-lg">
                        <div class="flex justify-between mb-2">
                            <span class="font-bold">{{ skill.name }}</span>
                            <span class="text-gray-400">{{ skill.get_category_display }}</span>
                        </div>
                        <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                            {% with width=skill.level|add:'0' %}
                            <!-- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ multiply -->
                            <div class="h-full bg-primary skill-bar"
                                 style="width: {% widthratio skill.level 5 100 %}%">
                            </div>
                            {% endwith %}
                        </div>
                        <div class="text-sm text-gray-400 mt-1">–£—Ä–æ–≤–µ–Ω—å: {{ skill.level }}/5</div>
                    </div>
                    {% empty %}
                    <p class="text-gray-500">–ù–∞–≤—ã–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                    {% endfor %}
                </div>
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {% if profile.location %}
                <div class="p-4 bg-gray-800 rounded-lg">
                    <h4 class="font-bold mb-2">üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h4>
                    <p>{{ profile.location }}</p>
                </div>
                {% endif %}

                {% if profile.website %}
                <div class="p-4 bg-gray-800 rounded-lg">
                    <h4 class="font-bold mb-2">üåê –í–µ–±-—Å–∞–π—Ç</h4>
                    <a href="{{ profile.website }}" class="text-primary hover:underline" target="_blank">
                        {{ profile.website|truncatechars:30 }}
                    </a>
                </div>
                {% endif %}

                <div class="p-4 bg-gray-800 rounded-lg">
                    <h4 class="font-bold mb-2">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä—ã</h4>
                    <p>{{ profile.views }}</p>
                </div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <footer class="mt-12 pt-8 border-t border-gray-700 text-center text-gray-500">
            <p>CodeCV ‚Ä¢ –†–µ–∑—é–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚Ä¢ {{ profile.user.username }}</p>
        </footer>
    </div>

    <script>
        // –ê–Ω–∏–º–∞—Ü–∏—è skill bars –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            const skillBars = document.querySelectorAll('.skill-bar');
            skillBars.forEach(bar => {
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = bar.style.width; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ CSS –∑–Ω–∞—á–µ–Ω–∏–µ
                }, 100);
            });
        });
    </script>
</body>
</html>

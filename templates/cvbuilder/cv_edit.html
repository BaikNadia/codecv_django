<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактирование резюме - CodeCV</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .avatar-preview {
            border: 3px solid #667eea;
            transition: all 0.3s;
            object-fit: cover;
        }

        .avatar-preview:hover {
            transform: scale(1.05);
            border-color: #764ba2;
        }

        .theme-preview {
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .theme-preview:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .theme-preview.selected {
            border-color: #667eea;
        }

        .theme-github-dark {
            background: #0d1117;
            color: #c9d1d9;
        }

        .theme-github-light {
            background: #ffffff;
            color: #24292e;
            border: 1px solid #e1e4e8;
        }

        .theme-dracula {
            background: #282a36;
            color: #f8f8f2;
        }

        .theme-nord {
            background: #2e3440;
            color: #d8dee9;
        }
    </style>
</head>
<body class="flex items-center justify-center">
    <div class="w-full max-w-4xl mx-auto">
        <div class="form-card rounded-2xl shadow-2xl overflow-hidden">
            <!-- Заголовок -->
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold">
                            <i class="fas fa-edit mr-3"></i>Редактирование резюме
                        </h1>
                        <p class="mt-2 opacity-90">Настройте свое резюме и синхронизируйте с GitHub</p>
                    </div>
                    <a href="{% url 'cv_detail' username=user.username %}"
                       class="bg-white text-blue-600 px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition">
                        <i class="fas fa-eye mr-2"></i>Предпросмотр
                    </a>
                </div>
            </div>

            <!-- Форма -->
            <form method="POST" enctype="multipart/form-data" class="p-8" id="cv-form">
                {% csrf_token %}

                <!-- Сообщения об ошибках -->
                {% if messages %}
                <div class="mb-6">
                    {% for message in messages %}
                    <div class="p-4 rounded-lg mb-2 {% if message.tags == 'error' %}bg-red-50 text-red-700 border border-red-200{% else %}bg-green-50 text-green-700 border border-green-200{% endif %}">
                        <i class="fas fa-{% if message.tags == 'error' %}exclamation-circle{% else %}check-circle{% endif %} mr-2"></i>
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Левая колонка -->
                    <div>
                        <!-- Аватар -->
                        <div class="mb-8">
                            <label class="block font-bold text-gray-700 mb-4 text-lg">
                                <i class="fas fa-user-circle mr-2"></i>Аватар профиля
                            </label>
                            <div class="flex flex-col items-center">
                                <div id="avatar-container">
                                    {% if profile.avatar %}
                                        <img src="{{ profile.avatar.url }}"
                                             alt="Avatar"
                                             id="avatar-preview"
                                             class="avatar-preview w-32 h-32 rounded-full mb-4">
                                        <div class="mt-2" id="avatar-delete-container">
                                            <label class="inline-flex items-center cursor-pointer text-sm text-red-600">
                                                <input type="checkbox" name="avatar-clear" id="avatar-clear" class="mr-2">
                                                <i class="fas fa-trash mr-1"></i> Удалить аватар
                                            </label>
                                        </div>
                                    {% else %}
                                        <div id="avatar-preview"
                                             class="avatar-preview w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-purple-400 flex items-center justify-center text-white text-4xl mb-4">
                                            {{ user.username|first|upper }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Поле для загрузки файла -->
                                <input type="file"
                                       name="avatar"
                                       id="avatar-input"
                                       class="hidden"
                                       accept="image/jpeg,image/png,image/gif,image/webp">
                                <label for="avatar-input"
                                       class="cursor-pointer bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full hover:shadow-lg transition mt-2">
                                    <i class="fas fa-upload mr-2"></i>
                                    {% if profile.avatar %}Изменить фото{% else %}Загрузить фото{% endif %}
                                </label>

                                <p class="mt-2 text-sm text-gray-500 text-center">
                                    Макс. размер: 2MB<br>
                                    Форматы: JPG, PNG, GIF, WebP
                                </p>
                            </div>
                        </div>

                        <!-- Основная информация -->
                        <div class="space-y-6">
                            <h3 class="font-bold text-xl text-gray-800 border-l-4 border-blue-500 pl-3">
                                <i class="fas fa-info-circle mr-2"></i>Основная информация
                            </h3>

                            <div>
                                <label class="block font-bold text-gray-700 mb-2">
                                    <i class="fas fa-heading mr-2"></i>Заголовок
                                </label>
                                <input type="text"
                                       name="headline"
                                       value="{{ profile.headline|default:'' }}"
                                       placeholder="Например: Senior Python Developer"
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                            </div>

                            <div>
                                <label class="block font-bold text-gray-700 mb-2">
                                    <i class="fas fa-map-marker-alt mr-2"></i>Местоположение
                                </label>
                                <input type="text"
                                       name="location"
                                       value="{{ profile.location|default:'' }}"
                                       placeholder="Например: Москва, Россия"
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                            </div>

                            <div>
                                <label class="block font-bold text-gray-700 mb-2">
                                    <i class="fas fa-globe mr-2"></i>Веб-сайт
                                </label>
                                <input type="url"
                                       name="website"
                                       value="{{ profile.website|default:'' }}"
                                       placeholder="https://your-website.com"
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                            </div>
                        </div>
                    </div>

                    <!-- Правая колонка -->
                    <div class="space-y-8">
                        <!-- GitHub интеграция -->
                        <div class="bg-gradient-to-br from-gray-50 to-blue-50 p-6 rounded-xl border border-blue-100">
                            <h3 class="font-bold text-xl text-gray-800 mb-4">
                                <i class="fab fa-github mr-2"></i>GitHub интеграция
                            </h3>

                            <div class="mb-6">
                                <label class="block font-bold text-gray-700 mb-2">
                                    GitHub Username
                                </label>
                                <div class="flex">
                                    <span class="inline-flex items-center px-4 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        github.com/
                                    </span>
                                    <input type="text"
                                           name="github_username"
                                           value="{{ profile.github_username|default:'' }}"
                                           placeholder="yourusername"
                                           class="flex-1 p-3 border border-gray-300 rounded-r-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                                </div>
                                <p class="mt-2 text-sm text-gray-600">
                                    Укажите ваш GitHub для автоматической синхронизации проектов
                                </p>
                            </div>

                            {% if profile.github_username %}
                                <button type="button"
                                        onclick="syncGitHub()"
                                        id="sync-btn"
                                        class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition flex items-center justify-center">
                                    <i class="fas fa-sync-alt mr-2"></i>Синхронизировать с GitHub
                                </button>
                                <div id="sync-status" class="mt-3 text-sm"></div>
                            {% endif %}
                        </div>

                        <!-- Биография -->
                        <div>
                            <label class="block font-bold text-gray-700 mb-2">
                                <i class="fas fa-edit mr-2"></i>Биография
                            </label>
                            <textarea name="bio"
                                      rows="5"
                                      placeholder="Расскажите о себе, своем опыте и навыках..."
                                      class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">{{ profile.bio|default:'' }}</textarea>
                        </div>

                        <!-- Тема -->
                        <div>
                            <label class="block font-bold text-gray-700 mb-2">
                                <i class="fas fa-palette mr-2"></i>Тема оформления
                            </label>
                            <select name="theme" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                                <option value="github-dark" {% if profile.theme == 'github-dark' %}selected{% endif %}>
                                    GitHub Dark
                                </option>
                                <option value="github-light" {% if profile.theme == 'github-light' %}selected{% endif %}>
                                    GitHub Light
                                </option>
                                <option value="dracula" {% if profile.theme == 'dracula' %}selected{% endif %}>
                                    Dracula
                                </option>
                                <option value="nord" {% if profile.theme == 'nord' %}selected{% endif %}>
                                    Nord
                                </option>
                            </select>

                            <!-- Превью темы -->
                            <div class="mt-4 grid grid-cols-2 gap-3">
                                <div class="theme-preview theme-github-dark {% if profile.theme == 'github-dark' %}selected{% endif %}" onclick="selectTheme('github-dark')">
                                    <div class="font-bold">GitHub Dark</div>
                                    <div class="text-xs opacity-75 mt-1">Темная тема</div>
                                </div>
                                <div class="theme-preview theme-github-light {% if profile.theme == 'github-light' %}selected{% endif %}" onclick="selectTheme('github-light')">
                                    <div class="font-bold">GitHub Light</div>
                                    <div class="text-xs opacity-75 mt-1">Светлая тема</div>
                                </div>
                                <div class="theme-preview theme-dracula {% if profile.theme == 'dracula' %}selected{% endif %}" onclick="selectTheme('dracula')">
                                    <div class="font-bold">Dracula</div>
                                    <div class="text-xs opacity-75 mt-1">Фиолетовая тема</div>
                                </div>
                                <div class="theme-preview theme-nord {% if profile.theme == 'nord' %}selected{% endif %}" onclick="selectTheme('nord')">
                                    <div class="font-bold">Nord</div>
                                    <div class="text-xs opacity-75 mt-1">Арктическая тема</div>
                                </div>
                            </div>
                        </div>

                        <!-- Видимость -->
                        <div class="flex items-center p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl">
                            <div class="flex-1">
                                <h4 class="font-bold text-gray-800">
                                    <i class="fas fa-eye mr-2"></i>Публичный доступ
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">
                                    Ваше резюме будет доступно по ссылке
                                </p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox"
                                       name="is_public"
                                       value="true"
                                       class="sr-only peer"
                                       {% if profile.is_public %}checked{% endif %}>
                                <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Кнопки действий -->
                <div class="mt-10 pt-6 border-t border-gray-200 flex justify-between">
                    <a href="{% url 'cv_detail' username=user.username %}"
                       class="px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition">
                        <i class="fas fa-times mr-2"></i>Отмена
                    </a>

                    <button type="submit"
                            id="submit-btn"
                            class="px-10 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-bold hover:shadow-xl transition hover:scale-105">
                        <i class="fas fa-save mr-2"></i>Сохранить изменения
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Выбор темы кликом по превью
        function selectTheme(theme) {
            const select = document.querySelector('select[name="theme"]');
            select.value = theme;

            // Обновляем классы selected
            document.querySelectorAll('.theme-preview').forEach(preview => {
                preview.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        // Загрузка аватара
        document.getElementById('avatar-input').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Проверка размера файла (2MB)
            const maxSize = 2 * 1024 * 1024; // 2MB в байтах
            if (file.size > maxSize) {
                alert('Файл слишком большой. Максимальный размер: 2MB');
                this.value = '';
                return;
            }

            // Проверка типа файла
            const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
            if (!validTypes.includes(file.type)) {
                alert('Неверный формат файла. Разрешены: JPG, PNG, GIF, WebP');
                this.value = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const container = document.getElementById('avatar-container');
                const preview = document.getElementById('avatar-preview');

                // Создаем новый элемент img
                const img = document.createElement('img');
                img.id = 'avatar-preview';
                img.src = e.target.result;
                img.alt = 'Avatar preview';
                img.className = 'avatar-preview w-32 h-32 rounded-full mb-4';

                // Убираем чекбокс удаления если он был
                const deleteContainer = document.getElementById('avatar-delete-container');
                if (deleteContainer) {
                    deleteContainer.remove();
                }

                // Создаем новый контейнер для удаления
                const newDeleteContainer = document.createElement('div');
                newDeleteContainer.id = 'avatar-delete-container';
                newDeleteContainer.className = 'mt-2';
                newDeleteContainer.innerHTML = `
                    <label class="inline-flex items-center cursor-pointer text-sm text-red-600">
                        <input type="checkbox" name="avatar-clear" id="avatar-clear" class="mr-2">
                        <i class="fas fa-trash mr-1"></i> Удалить аватар
                    </label>
                `;

                // Заменяем содержимое контейнера
                container.innerHTML = '';
                container.appendChild(img);
                container.appendChild(newDeleteContainer);

                // Добавляем обработчик для чекбокса удаления
                document.getElementById('avatar-clear').addEventListener('change', function() {
                    if (this.checked) {
                        document.getElementById('avatar-input').value = '';
                    }
                });

                // Обновляем текст кнопки
                document.querySelector('label[for="avatar-input"]').innerHTML = '<i class="fas fa-upload mr-2"></i>Изменить фото';
            };

            reader.onerror = function() {
                alert('Ошибка при чтении файла');
                event.target.value = '';
            };

            reader.readAsDataURL(file);
        });

        // Обработчик для чекбокса удаления аватара
        document.addEventListener('change', function(e) {
            if (e.target.id === 'avatar-clear' && e.target.checked) {
                document.getElementById('avatar-input').value = '';
            }
        });

        // Синхронизация с GitHub
        async function syncGitHub() {
            const btn = document.getElementById('sync-btn');
            const status = document.getElementById('sync-status');

            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Синхронизация...';
            btn.disabled = true;
            status.innerHTML = '';

            try {
                const response = await fetch('/cv/sync-github/', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                        'Content-Type': 'application/json',
                    }
                });

                const data = await response.json();

                if (data.success) {
                    status.innerHTML = '<span class="text-green-600"><i class="fas fa-check mr-1"></i>Синхронизация успешна!</span>';
                    setTimeout(() => {
                        window.location.reload();
                    }, 1500);
                } else {
                    status.innerHTML = `<span class="text-red-600"><i class="fas fa-exclamation-triangle mr-1"></i>Ошибка: ${data.error}</span>`;
                }
            } catch (error) {
                status.innerHTML = `<span class="text-red-600"><i class="fas fa-exclamation-triangle mr-1"></i>Ошибка сети: ${error.message}</span>`;
            } finally {
                btn.innerHTML = '<i class="fas fa-sync-alt mr-2"></i>Синхронизировать с GitHub';
                btn.disabled = false;
            }
        }

        // Обработка отправки формы
        document.getElementById('cv-form').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Сохранение...';
            submitBtn.disabled = true;

            // Добавляем небольшую задержку чтобы пользователь увидел изменение
            setTimeout(() => {
                submitBtn.disabled = false;
            }, 3000);
        });

        // Инициализация обработчика для существующего чекбокса удаления
        const existingDeleteCheckbox = document.getElementById('avatar-clear');
        if (existingDeleteCheckbox) {
            existingDeleteCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    document.getElementById('avatar-input').value = '';
                }
            });
        }
    </script>
</body>
</html>
<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Редактирование резюме - CodeCV</title>-->
<!--    &lt;!&ndash; Tailwind CSS &ndash;&gt;-->
<!--    <script src="https://cdn.tailwindcss.com"></script>-->
<!--    &lt;!&ndash; Font Awesome &ndash;&gt;-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">-->
<!--    <style>-->
<!--        body {-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            min-height: 100vh;-->
<!--            padding: 20px;-->
<!--        }-->

<!--        .form-card {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            backdrop-filter: blur(10px);-->
<!--        }-->

<!--        .avatar-preview {-->
<!--            border: 3px solid #667eea;-->
<!--            transition: all 0.3s;-->
<!--        }-->

<!--        .avatar-preview:hover {-->
<!--            transform: scale(1.05);-->
<!--            border-color: #764ba2;-->
<!--        }-->

<!--        .theme-preview {-->
<!--            border-radius: 10px;-->
<!--            padding: 15px;-->
<!--            margin: 10px 0;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s;-->
<!--            border: 2px solid transparent;-->
<!--        }-->

<!--        .theme-preview:hover {-->
<!--            transform: translateY(-3px);-->
<!--            box-shadow: 0 10px 20px rgba(0,0,0,0.1);-->
<!--        }-->

<!--        .theme-preview.selected {-->
<!--            border-color: #667eea;-->
<!--        }-->

<!--        .theme-github-dark {-->
<!--            background: #0d1117;-->
<!--            color: #c9d1d9;-->
<!--        }-->

<!--        .theme-github-light {-->
<!--            background: #ffffff;-->
<!--            color: #24292e;-->
<!--            border: 1px solid #e1e4e8;-->
<!--        }-->

<!--        .theme-dracula {-->
<!--            background: #282a36;-->
<!--            color: #f8f8f2;-->
<!--        }-->

<!--        .theme-nord {-->
<!--            background: #2e3440;-->
<!--            color: #d8dee9;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="flex items-center justify-center">-->
<!--    <div class="w-full max-w-4xl mx-auto">-->
<!--        <div class="form-card rounded-2xl shadow-2xl overflow-hidden">-->
<!--            &lt;!&ndash; Заголовок &ndash;&gt;-->
<!--            <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white">-->
<!--                <div class="flex items-center justify-between">-->
<!--                    <div>-->
<!--                        <h1 class="text-3xl font-bold">-->
<!--                            <i class="fas fa-edit mr-3"></i>Редактирование резюме-->
<!--                        </h1>-->
<!--                        <p class="mt-2 opacity-90">Настройте свое резюме и синхронизируйте с GitHub</p>-->
<!--                    </div>-->
<!--                    <a href="{% url 'cv_detail' username=user.username %}"-->
<!--                       class="bg-white text-blue-600 px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition">-->
<!--                        <i class="fas fa-eye mr-2"></i>Предпросмотр-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Форма &ndash;&gt;-->
<!--            <form method="POST" enctype="multipart/form-data" class="p-8">-->
<!--                {% csrf_token %}-->

<!--                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">-->
<!--                    &lt;!&ndash; Левая колонка &ndash;&gt;-->
<!--                    <div>-->
<!--                        &lt;!&ndash; Аватар &ndash;&gt;-->
<!--                        <div class="mb-8">-->
<!--                            <label class="block font-bold text-gray-700 mb-4 text-lg">-->
<!--                                <i class="fas fa-user-circle mr-2"></i>Аватар профиля-->
<!--                            </label>-->
<!--                            <div class="flex flex-col items-center">-->
<!--                                {% if profile.avatar %}-->
<!--                                    <img src="{{ profile.avatar.url }}"-->
<!--                                         alt="Avatar"-->
<!--                                         class="avatar-preview w-32 h-32 rounded-full mb-4">-->
<!--                                {% else %}-->
<!--                                    <div class="avatar-preview w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-purple-400 flex items-center justify-center text-white text-4xl mb-4">-->
<!--                                        {{ user.username|first|upper }}-->
<!--                                    </div>-->
<!--                                {% endif %}-->
<!--                                <input type="file"-->
<!--                                       name="avatar"-->
<!--                                       id="avatar"-->
<!--                                       class="hidden"-->
<!--                                       accept="image/*">-->
<!--                                <label for="avatar"-->
<!--                                       class="cursor-pointer bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full hover:shadow-lg transition">-->
<!--                                    <i class="fas fa-upload mr-2"></i>Загрузить фото-->
<!--                                </label>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Основная информация &ndash;&gt;-->
<!--                        <div class="space-y-6">-->
<!--                            <h3 class="font-bold text-xl text-gray-800 border-l-4 border-blue-500 pl-3">-->
<!--                                <i class="fas fa-info-circle mr-2"></i>Основная информация-->
<!--                            </h3>-->

<!--                            <div>-->
<!--                                <label class="block font-bold text-gray-700 mb-2">-->
<!--                                    <i class="fas fa-heading mr-2"></i>Заголовок-->
<!--                                </label>-->
<!--                                <input type="text"-->
<!--                                       name="headline"-->
<!--                                       value="{{ profile.headline }}"-->
<!--                                       placeholder="Например: Senior Python Developer"-->
<!--                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">-->
<!--                            </div>-->

<!--                            <div>-->
<!--                                <label class="block font-bold text-gray-700 mb-2">-->
<!--                                    <i class="fas fa-map-marker-alt mr-2"></i>Местоположение-->
<!--                                </label>-->
<!--                                <input type="text"-->
<!--                                       name="location"-->
<!--                                       value="{{ profile.location }}"-->
<!--                                       placeholder="Например: Москва, Россия"-->
<!--                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">-->
<!--                            </div>-->

<!--                            <div>-->
<!--                                <label class="block font-bold text-gray-700 mb-2">-->
<!--                                    <i class="fas fa-globe mr-2"></i>Веб-сайт-->
<!--                                </label>-->
<!--                                <input type="url"-->
<!--                                       name="website"-->
<!--                                       value="{{ profile.website }}"-->
<!--                                       placeholder="https://your-website.com"-->
<!--                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Правая колонка &ndash;&gt;-->
<!--                    <div class="space-y-8">-->
<!--                        &lt;!&ndash; GitHub интеграция &ndash;&gt;-->
<!--                        <div class="bg-gradient-to-br from-gray-50 to-blue-50 p-6 rounded-xl border border-blue-100">-->
<!--                            <h3 class="font-bold text-xl text-gray-800 mb-4">-->
<!--                                <i class="fab fa-github mr-2"></i>GitHub интеграция-->
<!--                            </h3>-->

<!--                            <div class="mb-6">-->
<!--                                <label class="block font-bold text-gray-700 mb-2">-->
<!--                                    GitHub Username-->
<!--                                </label>-->
<!--                                <div class="flex">-->
<!--                                    <span class="inline-flex items-center px-4 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500">-->
<!--                                        github.com/-->
<!--                                    </span>-->
<!--                                    <input type="text"-->
<!--                                           name="github_username"-->
<!--                                           value="{{ profile.github_username }}"-->
<!--                                           placeholder="yourusername"-->
<!--                                           class="flex-1 p-3 border border-gray-300 rounded-r-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">-->
<!--                                </div>-->
<!--                                <p class="mt-2 text-sm text-gray-600">-->
<!--                                    Укажите ваш GitHub для автоматической синхронизации проектов-->
<!--                                </p>-->
<!--                            </div>-->

<!--                            {% if profile.github_username %}-->
<!--                                <button type="button"-->
<!--                                        onclick="syncGitHub()"-->
<!--                                        id="sync-btn"-->
<!--                                        class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition flex items-center justify-center">-->
<!--                                    <i class="fas fa-sync-alt mr-2"></i>Синхронизировать с GitHub-->
<!--                                </button>-->
<!--                                <div id="sync-status" class="mt-3 text-sm"></div>-->
<!--                            {% endif %}-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Биография &ndash;&gt;-->
<!--                        <div>-->
<!--                            <label class="block font-bold text-gray-700 mb-2">-->
<!--                                <i class="fas fa-edit mr-2"></i>Биография-->
<!--                            </label>-->
<!--                            <textarea name="bio"-->
<!--                                      rows="5"-->
<!--                                      placeholder="Расскажите о себе, своем опыте и навыках..."-->
<!--                                      class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">{{ profile.bio }}</textarea>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Тема &ndash;&gt;-->
<!--                        <div>-->
<!--                            <label class="block font-bold text-gray-700 mb-2">-->
<!--                                <i class="fas fa-palette mr-2"></i>Тема оформления-->
<!--                            </label>-->
<!--                            <select name="theme" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200">-->
<!--                                <option value="github-dark" {% if profile.theme == 'github-dark' %}selected{% endif %}>-->
<!--                                    GitHub Dark-->
<!--                                </option>-->
<!--                                <option value="github-light" {% if profile.theme == 'github-light' %}selected{% endif %}>-->
<!--                                    GitHub Light-->
<!--                                </option>-->
<!--                                <option value="dracula" {% if profile.theme == 'dracula' %}selected{% endif %}>-->
<!--                                    Dracula-->
<!--                                </option>-->
<!--                                <option value="nord" {% if profile.theme == 'nord' %}selected{% endif %}>-->
<!--                                    Nord-->
<!--                                </option>-->
<!--                            </select>-->

<!--                            &lt;!&ndash; Превью темы &ndash;&gt;-->
<!--                            <div class="mt-4 grid grid-cols-2 gap-3">-->
<!--                                <div class="theme-preview theme-github-dark {% if profile.theme == 'github-dark' %}selected{% endif %}" onclick="selectTheme('github-dark')">-->
<!--                                    <div class="font-bold">GitHub Dark</div>-->
<!--                                    <div class="text-xs opacity-75 mt-1">Темная тема</div>-->
<!--                                </div>-->
<!--                                <div class="theme-preview theme-github-light {% if profile.theme == 'github-light' %}selected{% endif %}" onclick="selectTheme('github-light')">-->
<!--                                    <div class="font-bold">GitHub Light</div>-->
<!--                                    <div class="text-xs opacity-75 mt-1">Светлая тема</div>-->
<!--                                </div>-->
<!--                                <div class="theme-preview theme-dracula {% if profile.theme == 'dracula' %}selected{% endif %}" onclick="selectTheme('dracula')">-->
<!--                                    <div class="font-bold">Dracula</div>-->
<!--                                    <div class="text-xs opacity-75 mt-1">Фиолетовая тема</div>-->
<!--                                </div>-->
<!--                                <div class="theme-preview theme-nord {% if profile.theme == 'nord' %}selected{% endif %}" onclick="selectTheme('nord')">-->
<!--                                    <div class="font-bold">Nord</div>-->
<!--                                    <div class="text-xs opacity-75 mt-1">Арктическая тема</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Видимость &ndash;&gt;-->
<!--                        <div class="flex items-center p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl">-->
<!--                            <div class="flex-1">-->
<!--                                <h4 class="font-bold text-gray-800">-->
<!--                                    <i class="fas fa-eye mr-2"></i>Публичный доступ-->
<!--                                </h4>-->
<!--                                <p class="text-sm text-gray-600 mt-1">-->
<!--                                    Ваше резюме будет доступно по ссылке-->
<!--                                </p>-->
<!--                            </div>-->
<!--                            <label class="relative inline-flex items-center cursor-pointer">-->
<!--                                <input type="checkbox"-->
<!--                                       name="is_public"-->
<!--                                       value="true"-->
<!--                                       class="sr-only peer"-->
<!--                                       {% if profile.is_public %}checked{% endif %}>-->
<!--                                <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"></div>-->
<!--                            </label>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; Кнопки действий &ndash;&gt;-->
<!--                <div class="mt-10 pt-6 border-t border-gray-200 flex justify-between">-->
<!--                    <a href="{% url 'cv_detail' username=user.username %}"-->
<!--                       class="px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition">-->
<!--                        <i class="fas fa-times mr-2"></i>Отмена-->
<!--                    </a>-->

<!--                    <button type="submit"-->
<!--                            class="px-10 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-bold hover:shadow-xl transition hover:scale-105">-->
<!--                        <i class="fas fa-save mr-2"></i>Сохранить изменения-->
<!--                    </button>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        // Выбор темы кликом по превью-->
<!--        function selectTheme(theme) {-->
<!--            const select = document.querySelector('select[name="theme"]');-->
<!--            select.value = theme;-->

<!--            // Обновляем классы selected-->
<!--            document.querySelectorAll('.theme-preview').forEach(preview => {-->
<!--                preview.classList.remove('selected');-->
<!--            });-->
<!--            event.currentTarget.classList.add('selected');-->
<!--        }-->

<!--        // Загрузка аватара-->
<!--        document.getElementById('avatar').addEventListener('change', function(event) {-->
<!--            const file = event.target.files[0];-->
<!--            if (file) {-->
<!--                const reader = new FileReader();-->
<!--                reader.onload = function(e) {-->
<!--                    const preview = document.querySelector('.avatar-preview');-->
<!--                    if (preview.tagName === 'IMG') {-->
<!--                        preview.src = e.target.result;-->
<!--                    } else {-->
<!--                        // Если это div, заменяем на img-->
<!--                        const img = document.createElement('img');-->
<!--                        img.src = e.target.result;-->
<!--                        img.className = 'avatar-preview w-32 h-32 rounded-full mb-4';-->
<!--                        preview.parentNode.replaceChild(img, preview);-->
<!--                    }-->
<!--                }-->
<!--                reader.readAsDataURL(file);-->
<!--            }-->
<!--        });-->

<!--        // Синхронизация с GitHub-->
<!--        async function syncGitHub() {-->
<!--            const btn = document.getElementById('sync-btn');-->
<!--            const status = document.getElementById('sync-status');-->

<!--            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Синхронизация...';-->
<!--            btn.disabled = true;-->
<!--            status.innerHTML = '';-->

<!--            try {-->
<!--                const response = await fetch('/cv/sync-github/', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,-->
<!--                        'Content-Type': 'application/json',-->
<!--                    }-->
<!--                });-->

<!--                const data = await response.json();-->

<!--                if (data.success) {-->
<!--                    status.innerHTML = '<span class="text-green-600"><i class="fas fa-check mr-1"></i>Синхронизация успешна!</span>';-->
<!--                    setTimeout(() => {-->
<!--                        window.location.reload();-->
<!--                    }, 1500);-->
<!--                } else {-->
<!--                    status.innerHTML = `<span class="text-red-600"><i class="fas fa-exclamation-triangle mr-1"></i>Ошибка: ${data.error}</span>`;-->
<!--                }-->
<!--            } catch (error) {-->
<!--                status.innerHTML = `<span class="text-red-600"><i class="fas fa-exclamation-triangle mr-1"></i>Ошибка сети: ${error.message}</span>`;-->
<!--            } finally {-->
<!--                btn.innerHTML = '<i class="fas fa-sync-alt mr-2"></i>Синхронизировать с GitHub';-->
<!--                btn.disabled = false;-->
<!--            }-->
<!--        }-->

<!--        // Автосохранение (опционально)-->
<!--        let saveTimeout;-->
<!--        document.querySelectorAll('input, textarea, select').forEach(element => {-->
<!--            element.addEventListener('change', function() {-->
<!--                if (saveTimeout) clearTimeout(saveTimeout);-->
<!--                saveTimeout = setTimeout(() => {-->
<!--                    document.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save mr-2"></i>Автосохранение...';-->
<!--                    document.querySelector('form').submit();-->
<!--                }, 2000);-->
<!--            });-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->
